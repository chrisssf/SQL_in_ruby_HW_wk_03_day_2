# CRUD Quiz

Use the solution to this afternoon's Property Tracker lab to answer the following questions. Please write your answers under each question, push the file to GitHub, and submit in the usual way.

## MVP Questions

In our Property Tracker application:

Q1. Where are we instantiating instances of the `Property` class?
In console.rb on lines 6, 15 and 24

Q2. Where are we defining the SQL that enables us to save the ruby `Property` object into the database?
In property.rb, in the save() method, in the variable name sql starting on line 18.

Q3. In `console.rb`, which lines modify the database?
line 4, deletes everything in the database,
lines 13, 22 and 31, all add a new record to the database
line 33 deletes a single record, property1

Q4. Why do we not define the id of a `Property` object at the point we instantiate it (‘new it up’)?
The id will automatically be assigned when it is added to the database as the id has type SERIAL which increments by 1 when a new record is added.

Q5. Where and how do we assign the id (that is generated by the database) to the ruby `Property` object?
in property.rb in the save() method line 29 requests that the id is returned when executing the sql statement (line 32) and saved as an instance variable @id.

Q6. Why do we put a guard (an `if` clause) on the `@id` attribute in the constructor?
When we instantiate a new property we don't specify an id in the hash, therefore options['id'] will be nil and therefore our instance variable @id will equal nil.

Q7. Why are some of the CRUD actions represented by instance methods, and others by class methods?
Because sometimes we are referring to a single instance or record in the database and sometimes we are doing something to the database as a whole. For example if we want to update or delete a record in the database we can run that method on a single instance in ruby, however if we want to display everything, find something in the database or delete everything these actions must be performed on the class as it affects every record (or every instance)

Q8. What type of data structure is returned by calls to `db.exec_prepared()`? In the `save` method, how do we access the id from the returned data structure?
It returns an array of hashes, therefore if we want the id from it we have to get the 1st item from index 0 of the array. This gives us a hash and we want the value related to the key called id. We then need to convert it to an integer. this would look like [0]["id"].to_i

Q9. Why do we use prepared statements when performing database operations?
they prevent SQL injection attacks

## Extension Questions

Look at the `find_by_id` and `find_by_address` methods in the `Property` class.

Q10. What do they take in as their arguments?
find_by_id takes in an id which should be a number.
find_by_address takes in an address which a list of characters which should match an address in the database.

Q11. What are their return values?
db.exec_prepared returns an array of hashes. we get the first item from the array which leaves a hash of all the fields of the record matching the query. This hash has all the data to create a new instance which is then returned.
